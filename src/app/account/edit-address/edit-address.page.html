<ion-header mode="ios" mode='ios'>
  <ion-toolbar>
  	<ion-buttons slot="start">
      <ion-back-button style="font-size: 4vw;" text="{{'Atrás' | translate}}" defaultHref="/tabs/account/address"></ion-back-button>
    </ion-buttons>
    <ion-title style="font-size: 4vw;">{{"Editar dirección" | translate}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>


	<ion-list no-margin *ngIf="settings.customer?.billing">

  <ion-list-header>
    <ion-label>{{"Dirección de facturación" | translate}}</ion-label>
  </ion-list-header>

        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Nombre" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.billing.first_name" name="firstname"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Apellidos" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.billing.last_name" name="lastname"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Telefono" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.billing.phone" name="telephone"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Empresa" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.billing.company" name="company"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Dirección de la calle" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.billing.address_1" name="address_1"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Dirección de la calle" | translate}} 2</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.billing.address_2" name="address_2"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Email" | translate}}</ion-label>
            <ion-input required type="email" [(ngModel)]="settings.customer.billing.email" name="email"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Ciudad" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.billing.city" name="city"> </ion-input>
        </ion-item>
        
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Código postal" | translate}}</ion-label>
            <ion-input required type="number" [(ngModel)]="settings.customer.billing.postcode" name="postcode"> </ion-input>
        </ion-item>

        <ion-item lines="full" *ngIf="countries && countries.length > 1">
            <ion-label color="medium">{{"País" | translate}}</ion-label>
            <ion-select [(ngModel)]="settings.customer.billing.country" (ngModelChange)="getBillingRegion()" name="billing_country">
                <div *ngFor="let field of countries">
                    <ion-select-option value="{{field.value}}"><span [innerHTML]="field.label"></span> </ion-select-option>
                </div>
            </ion-select>
        </ion-item>

        <ion-item lines="full" *ngIf="billingStates?.regions.length">
            <ion-label color="medium">{{"Estado" | translate}}</ion-label>
            <ion-select [(ngModel)]="settings.customer.billing.state" name="billing_state">
                <div *ngFor="let field of billingStates.regions">
                    <ion-select-option value="{{field.value}}"><span [innerHTML]="field.label"></span></ion-select-option>
                </div>
            </ion-select>
        </ion-item>

        <ion-item lines="full" *ngIf="!billingStates?.regions.length">
            <ion-label color="medium" position="stacked">{{"Estado" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.billing.state" name="billing_state"> </ion-input>
        </ion-item>


</ion-list>


<ion-list no-margin *ngIf="settings.customer?.shipping">

  <ion-list-header>
    <ion-label>{{"Dirección de Envío" | translate}}</ion-label>
  </ion-list-header>

        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Nombre" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.shipping.first_name" name="firstname"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Apellidos" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.shipping.last_name" name="lastname"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Empresa" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.shipping.company" name="company"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Dirección de la calle" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.shipping.address_1" name="address_1"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Dirección de la calle" | translate}} 2</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.shipping.address_2" name="address_2"> </ion-input>
        </ion-item>
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Ciudad" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.shipping.city" name="city"> </ion-input>
        </ion-item>
        
        <ion-item lines="full">
            <ion-label color="medium" position="stacked">{{"Código postal" | translate}}</ion-label>
            <ion-input required type="number" [(ngModel)]="settings.customer.shipping.postcode" name="postcode"> </ion-input>
        </ion-item>

        <ion-item lines="full" *ngIf="countries && countries.length > 1">
            <ion-label color="medium">{{"País" | translate}}</ion-label>
            <ion-select [(ngModel)]="settings.customer.shipping.country" (ngModelChange)="getShippingRegion()" name="shipping_country">
                <div *ngFor="let field of countries">
                    <ion-select-option value="{{field.value}}"><span [innerHTML]="field.label"></span> </ion-select-option>
                </div>
            </ion-select>
        </ion-item>

        <ion-item lines="full" *ngIf="shippingStates?.regions.length">
            <ion-label color="medium">{{"Estado" | translate}}</ion-label>
            <ion-select [(ngModel)]="settings.customer.shipping.state" name="shipping_state">
                <div *ngFor="let field of shippingStates.regions">
                    <ion-select-option value="{{field.value}}"><span [innerHTML]="field.label"></span></ion-select-option>
                </div>
            </ion-select>
        </ion-item>

        <ion-item lines="full" *ngIf="!shippingStates?.regions.length">
            <ion-label color="medium" position="stacked">{{"Estado" | translate}}</ion-label>
            <ion-input required type="text" [(ngModel)]="settings.customer.shipping.state" name="shipping_state"> </ion-input>
        </ion-item>

</ion-list>


<ion-button *ngIf="settings.customer" color="{{settings.theme.button}}" expand="block" (click)="processAddress()" [disabled]="disableButton" fill="solid">{{"Guardar" | translate}}</ion-button>
</ion-content>
